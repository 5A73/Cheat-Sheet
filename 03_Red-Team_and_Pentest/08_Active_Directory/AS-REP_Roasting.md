AS-REP Roastingは、Kerberos認証プロトコルにおける攻撃手法の一つで、Active Directory (AD) 環境での特権昇格や資格情報の取得を目的としています。この攻撃は、Kerberosプリンシパル（ユーザーアカウント）が「Kerberos pre-authentication」を無効にしている場合に可能です。

攻撃の流れ

	1.	ターゲットアカウントの特定: 攻撃者は、Active Directory内のユーザーアカウントのうち、「pre-authentication」が無効になっているアカウントを特定します。
	2.	AS-REQ送信: 攻撃者はAS-REQ（認証サーバーリクエスト）を送信し、ターゲットユーザーの認証チケット（TGT）を要求します。この際、pre-authenticationが無効になっているため、パスワードの検証なしにサーバーは応答します。
	3.	AS-REPの受信: 認証サーバー（KDC）は、暗号化されたTGTを含むAS-REP（認証サーバーレスポンス）を返します。この応答には、ユーザーのパスワードハッシュで暗号化された部分が含まれています。
	4.	ハッシュのオフラインクラック: 攻撃者は取得したAS-REPレスポンスをオフラインで解析し、ユーザーのパスワードをクラックします。これにより、認証情報が手に入る可能性があります。

防御策

	•	Kerberos pre-authenticationを有効にする: ユーザーアカウントの設定で「pre-authentication」を必ず有効にすることで、この攻撃を防ぐことができます。
	•	監視とログの分析: Kerberos関連の異常な認証リクエストを監視し、AS-REP Roastingの兆候がないかログを定期的に確認することも重要です。

AS-REP Roastingは、攻撃者がAD内での足場を得るために使用される手法の一つであり、パスワードの強度や多要素認証の導入が防御に有効です。
![image](https://github.com/user-attachments/assets/e6eeee9a-0f95-472b-acb9-87ba8f8d6891)
